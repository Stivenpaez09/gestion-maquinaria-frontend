<body class="bg-[#0f172a] text-gray-200 min-h-screen flex">
  <app-sidebar-operador></app-sidebar-operador>

  <!-- =========================
       MAIN AREA
  ========================== -->
  <main class="flex-1 flex flex-col">
    <!-- =========================
         HEADER SUPERIOR
    ========================== -->
    <header
      class="h-16 bg-[#1e293b] flex items-center justify-between px-6 border-b py-11 border-gray-800"
    >
      <div>
        <h1 class="text-xl font-bold">Detalles de Mantenimiento Programado</h1>
        <span class="text-sm text-gray-400">Información y gestión completa</span>
      </div>
    </header>

    <!-- =========================
         CONTENIDO PRINCIPAL
    ========================== -->
    <section class="p-6 flex-1 flex items-center justify-center">
      @if (cargando) {
      <div class="flex items-center justify-center">
        <svg
          class="animate-spin w-12 h-12 text-[#f97316]"
          xmlns="http://www.w3.org/2000/svg"
          fill="none"
          viewBox="0 0 24 24"
        >
          <circle
            class="opacity-25"
            cx="12"
            cy="12"
            r="10"
            stroke="currentColor"
            stroke-width="4"
          ></circle>
          <path
            class="opacity-75"
            fill="currentColor"
            d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4z"
          ></path>
        </svg>
      </div>
      } @else if (mantenimiento) {
      <div class="max-w-3xl w-full bg-[#0b1220] border border-gray-700 rounded-2xl p-8 shadow-lg">
        <div class="mb-6">
          <h2 class="text-2xl font-bold text-white">{{ mantenimiento.nombre }}</h2>
          <p class="text-sm text-gray-400">
            ID: <span class="text-gray-200 font-semibold">#{{ mantenimiento.id_programado }}</span>
          </p>
        </div>

        <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-6">
          <div class="bg-[#111827] p-4 rounded-lg border border-gray-700">
            <p class="text-xs text-gray-500 font-semibold uppercase mb-2">Tipo</p>
            <p class="text-white font-semibold mt-1">{{ mantenimiento.tipo | titlecase }}</p>
          </div>

          <div class="bg-[#111827] p-4 rounded-lg border border-gray-700">
            <p class="text-xs text-gray-500 font-semibold uppercase mb-2">Intervalo (horas)</p>
            <p class="text-white font-semibold mt-1">{{ mantenimiento.intervalo_horas }} h</p>
          </div>

          <div class="md:col-span-2 bg-[#111827] p-4 rounded-lg border border-gray-700">
            <p class="text-xs text-gray-500 font-semibold uppercase mb-2">Descripción</p>
            <p class="text-white mt-1">{{ mantenimiento.descripcion || 'Sin descripción' }}</p>
          </div>

          <div
            class="md:col-span-2 bg-gradient-to-r from-[#111827] to-[#0b1220] p-4 rounded-lg border border-gray-700 cursor-pointer hover:border-[#f97316]"
            (click)="router.navigate(['/detalles-maquinaria-operador', mantenimiento.maquina])"
          >
            <p class="text-xs text-gray-500 font-semibold uppercase mb-2">Máquina</p>
            <p class="text-white font-semibold">
              {{ maquinaObj ? maquinaObj.nombre_maquina : 'ID ' + mantenimiento.maquina }}
            </p>
            @if (maquinaObj) {
            <p class="text-sm text-gray-400 mt-1">
              {{ maquinaObj.marca || '' }} · {{ maquinaObj.serie || '' }}
            </p>
            }
            <p class="text-xs text-gray-400 mt-2">Haga clic para ver detalles de la máquina</p>
          </div>
        </div>

        <div class="border-t border-gray-700 pt-6 mb-6">
          <p class="text-xs text-gray-500 mb-1">
            Creado: {{ mantenimiento.created_at | date : 'dd/MM/yyyy HH:mm' }}
          </p>
          <p class="text-xs text-gray-500">
            Actualizado: {{ mantenimiento.updated_at | date : 'dd/MM/yyyy HH:mm' }}
          </p>
        </div>

        <div class="flex gap-4">
          <button
            (click)="router.navigate(['/detalles-maquinaria-operador', mantenimiento.maquina])"
            class="flex-1 bg-gray-700 hover:bg-gray-600 text-white font-semibold py-3 rounded-lg"
          >
            Volver
          </button>
        </div>
      </div>
      } @else {
      <div class="text-center">
        <p class="text-gray-400">Mantenimiento no encontrado</p>
        <button
          routerLink="/ver-maquinarias-admin"
          class="bg-[#f97316] hover:bg-[#ea580c] text-white font-semibold py-2 px-6 rounded-lg mt-4"
        >
          Volver
        </button>
      </div>
      }
    </section>
  </main>
</body>
